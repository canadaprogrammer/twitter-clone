(this["webpackJsonptwitter-clone"]=this["webpackJsonptwitter-clone"]||[]).push([[0],{54:function(e,t,c){},55:function(e,t,c){"use strict";c.r(t);var n=c(8),a=c.n(n),r=c(42),s=c.n(r),i=c(34),j=c(11),u=c(30),b=c(12),o=c(0),l=c.n(o),O=c(2),d=c(21),h=c(43),m=c(16),x=c(26),p=Object(h.a)({apiKey:"AIzaSyBoYtzFEnqCVDFt2nVL4XogREzTrJNfzQM",authDomain:"twitter-clone-4cec7.firebaseapp.com",projectId:"twitter-clone-4cec7",storageBucket:"twitter-clone-4cec7.appspot.com",messagingSenderId:"96834562095",appId:"1:96834562095:web:cd68935da6ccf531903eda"}),f=Object(d.d)(),v=Object(m.f)(p),g=Object(x.c)(p),w=c(6),N=function(){var e=Object(n.useState)(""),t=Object(j.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(""),s=Object(j.a)(r,2),i=s[0],u=s[1],b=Object(n.useState)(!0),o=Object(j.a)(b,2),h=o[0],m=o[1],x=Object(n.useState)(""),p=Object(j.a)(x,2),v=p[0],g=p[1],N=Object(n.useState)(!1),y=Object(j.a)(N,2),k=y[0],S=y[1],C=function(e){var t=e.target,c=t.name,n=t.value;"email"===c?a(n):"password"===c&&u(n)},I=function(){var e=Object(O.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!h){e.next=8;break}return e.next=5,Object(d.c)(f,c,i);case 5:n=e.sent,e.next=11;break;case 8:return e.next=10,Object(d.f)(f,c,i);case 10:n=e.sent;case 11:console.log(n),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),g(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),U=function(e){var t=e.target.name;"signIn"===t&&(m(!1),S(!0)),"signUp"===t&&(m(!0),S(!1))};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("form",{onSubmit:I,className:"authForm",children:[Object(w.jsx)("input",{name:"email",type:"text",placeholder:"Email",required:!0,value:c,onChange:C}),Object(w.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:i,onChange:C}),Object(w.jsx)("input",{type:"submit",value:h?"Create Account":"Sign In",className:"btn btnBlue authSubmit"}),v&&Object(w.jsx)("span",{className:"authError",children:v})]}),Object(w.jsxs)("div",{className:"authSwitch",children:[Object(w.jsx)("button",{onClick:U,name:"signIn",className:k?"activeSwitch":"",children:"Sign In"}),Object(w.jsx)("button",{onClick:U,name:"signUp",className:k?"":"activeSwitch",children:"Sign Up"})]})]})},y=c(24),k=c(38),S=function(){var e=Object(n.useState)(""),t=Object(j.a)(e,2),c=t[0],a=t[1],r=function(){var e=Object(O.a)(l.a.mark((function e(t){var c,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(c=t.target.name)?n=new d.b:"github"===c&&(n=new d.a),e.prev=2,e.next=5,Object(d.g)(f,n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),a(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(y.a,{icon:k.c,className:"twitterIcon",size:"3x"}),Object(w.jsx)(N,{}),Object(w.jsxs)("div",{className:"authSocialContainer",children:[Object(w.jsxs)("button",{onClick:r,name:"google",className:"btn",children:["Continue with Google ",Object(w.jsx)(y.a,{icon:k.b})]}),Object(w.jsxs)("button",{onClick:r,name:"github",className:"btn",children:["Continue with GitHub ",Object(w.jsx)(y.a,{icon:k.a})]})]}),c&&Object(w.jsx)("span",{className:"authError",children:c})]})},C=c(27),I=function(e){var t=e.ctwittObj,c=e.isOwner,a=Object(n.useState)(!1),r=Object(j.a)(a,2),s=r[0],i=r[1],u=Object(n.useState)(t.text),b=Object(j.a)(u,2),o=b[0],d=b[1],h=function(){var e=Object(O.a)(l.a.mark((function e(){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure to delete ".concat(t.text,"?"))){e.next=8;break}return e.next=4,Object(m.c)(Object(m.d)(v,"ctwitt",t.id));case 4:if(""===t.attachmentURL){e.next=8;break}return c=Object(x.d)(g,t.attachmentURL),e.next=8,Object(x.a)(c);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){return i((function(e){return!e}))},f=function(e){var t=e.target.value;d(t)},N=function(){var e=Object(O.a)(l.a.mark((function e(c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.next=3,Object(m.j)(Object(m.d)(v,"ctwitt",t.id),{text:o});case 3:i(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)("li",{className:"ctwittList",children:s?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("form",{onSubmit:N,className:"ctwittListForm",children:[Object(w.jsx)("div",{className:"ctwitt",children:t.attachmentURL?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("img",{src:t.attachmentURL,width:"100px",height:"50px",alt:"attached",className:"attachedImage"}),Object(w.jsx)("input",{type:"text",value:o,onChange:f,required:!0,className:"widthImage"})]}):Object(w.jsx)("input",{type:"text",value:o,onChange:f,required:!0})}),Object(w.jsx)("button",{type:"submit",children:Object(w.jsx)(y.a,{icon:C.f})})]}),Object(w.jsx)("button",{onClick:p,children:Object(w.jsx)(y.a,{icon:C.d})})]}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{className:"ctwitt",children:t.attachmentURL?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("img",{src:t.attachmentURL,width:"100px",height:"50px",alt:"attached",className:"attachedImage"}),Object(w.jsx)("span",{className:"widthImage",children:o})]}):Object(w.jsx)("span",{children:o})}),c&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("button",{onClick:p,children:Object(w.jsx)(y.a,{icon:C.b})}),Object(w.jsx)("button",{onClick:h,children:Object(w.jsx)(y.a,{icon:C.e})})]})]})})},U=c(57),F=function(e){var t=e.userObj,c=Object(n.useState)(""),a=Object(j.a)(c,2),r=a[0],s=a[1],i=Object(n.useState)(""),u=Object(j.a)(i,2),b=u[0],o=u[1],d=function(){var e=Object(O.a)(l.a.mark((function e(c){var n,a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),n="",""===b){e.next=10;break}return a=Object(x.d)(g,"".concat(t.uid,"/").concat(Object(U.a)())),e.next=6,Object(x.e)(a,b,"data_url");case 6:return i=e.sent,e.next=9,Object(x.b)(i.ref);case 9:n=e.sent;case 10:return e.next=12,Object(m.a)(Object(m.b)(v,"ctwitt"),{text:r,createdAt:Date.now(),creatorId:t.uid,attachmentURL:n});case 12:s(""),o(""),document.querySelector('input[type="file"]').value="";case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("form",{className:"formAddCtwitt",children:[Object(w.jsx)("input",{value:r,onChange:function(e){var t=e.target.value;s(t)},type:"text",placeholder:"What's on your mind?",maxLength:120,className:"inputCtwitt"}),Object(w.jsx)("label",{htmlFor:"inputSubmit",children:Object(w.jsx)(y.a,{icon:C.a,className:"btnSubmit"})}),Object(w.jsx)("input",{type:"submit",value:"",onClick:d,className:"submitCtwitt",id:"inputSubmit"})]}),Object(w.jsxs)("label",{htmlFor:"addPhoto",className:"btnAddPhoto",children:["Add Photo ",Object(w.jsx)(y.a,{icon:C.c})]}),Object(w.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],c=new FileReader;c.onloadend=function(e){var t=e.currentTarget.result;o(t)},c.readAsDataURL(t)},className:"addPhoto",id:"addPhoto"}),b&&Object(w.jsxs)("div",{className:"imagePreview",children:[Object(w.jsx)("img",{src:b,alt:"attached"}),Object(w.jsx)("button",{onClick:function(e){e.preventDefault(),o("")},className:"btn btnBlue clearBtn",children:"Clear"})]})]})},L=function(e){var t=e.userObj,c=Object(n.useState)([]),a=Object(j.a)(c,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){var e=Object(m.i)(Object(m.b)(v,"ctwitt"),Object(m.h)("createdAt","desc"));Object(m.g)(e,(function(e){var t=e.docs.map((function(e){return Object(i.a)({id:e.id},e.data())}));s(t)}))}),[]),Object(w.jsxs)("div",{className:"w-100",children:[Object(w.jsx)(F,{userObj:t}),Object(w.jsx)("ul",{children:r.map((function(e){return Object(w.jsx)(I,{ctwittObj:e,isOwner:e.creatorId===t.uid},e.id)}))})]})},A=function(e){var t,c=e.userObj,a=e.refreshUserName,r=Object(n.useState)(null!==(t=c.displayName)&&void 0!==t?t:"Anonymous"),s=Object(j.a)(r,2),i=s[0],u=s[1],o=Object(b.f)(),h=function(){var e=Object(O.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d.h)(f);case 3:o("/"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=function(){var e=Object(O.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(m.i)(Object(m.b)(v,"ctwitt"),Object(m.k)("creatorId","==",c.uid),Object(m.h)("createdAt","desc")),e.next=3,Object(m.e)(t);case 3:n=e.sent,console.log(n.docs.map((function(e){return e.data()})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[c.uid]);var x=function(){var e=Object(O.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c.displayName===i){e.next=4;break}return e.next=4,Object(d.i)(c,{displayName:i});case 4:a();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:"profileWrapper",children:[Object(w.jsxs)("form",{className:"profileForm",children:[Object(w.jsx)("input",{type:"text",placeholder:"display name",onChange:function(e){var t=e.target.value;u(t)},value:i}),Object(w.jsx)("button",{type:"submit",onClick:x,className:"btn btnBlue",children:"Update Profile"})]}),Object(w.jsx)("hr",{}),Object(w.jsx)("button",{onClick:h,className:"btn btnRed",children:"Log Out"})]})},R=function(e){var t,c=e.userObj;return Object(w.jsx)("nav",{children:Object(w.jsxs)("ul",{children:[Object(w.jsx)("li",{children:Object(w.jsx)(u.b,{className:"btn",to:"/",children:"Home"})}),Object(w.jsx)("li",{children:Object(w.jsxs)(u.b,{className:"btn",to:"/profile",children:[null!==(t=c.displayName)&&void 0!==t?t:"Anonymous","'s Profile"]})})]})})},D=function(e){var t=e.refreshUserName,c=e.isLoggedIn,n=e.userObj;return Object(w.jsxs)(u.a,{children:[c&&Object(w.jsx)(R,{userObj:n}),Object(w.jsx)(b.c,{children:c?Object(w.jsxs)(b.a,{path:"/",children:[Object(w.jsx)(b.a,{index:!0,element:Object(w.jsx)(L,{userObj:n})}),Object(w.jsx)(b.a,{path:"profile",element:Object(w.jsx)(A,{userObj:n,refreshUserName:t})})]}):Object(w.jsx)(b.a,{path:"/",element:Object(w.jsx)(S,{})})})]})};var E=function(){var e=Object(n.useState)(!1),t=Object(j.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(null),s=Object(j.a)(r,2),u=s[0],b=s[1];return Object(n.useEffect)((function(){Object(d.e)(f,(function(e){b(e||null),a(!0)}))}),[]),Object(w.jsx)("div",{className:"container",children:c?Object(w.jsx)(D,{refreshUserName:function(){b(Object(i.a)({},f.currentUser))},isLoggedIn:Boolean(u),userObj:u}):"Initializing..."})};c(54);s.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(E,{})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.9694ef2f.chunk.js.map